# 组件化开发

**组件化**：一个页面可以拆分成一个个组件，每个组件有着自己独立的结构、样式、行为

​	好处：便于维护，利于复用 -> 提升开发效率

​	组件分类：普通组件、根组件

**根组件**：整个应用最上层的组件，包裹所有普通小组件

![image-20240229154046277](img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229154046277.png)

![image-20240229154345282](img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229154345282.png)



## 组件的三个组成部分

- template：结构（有且只能有一个根元素）
- script：js逻辑
- style：样式（支持less，需要装包）

支持less：

```shell
1、标识less语法
<style lang="less">
2、安装依赖
npm install -D less-loader less
```



App.vue

```vue
<template>
<!--    只能有一个根节点，如果两个div并列会报错-->
    <div class="app">
        <div class="box" @click="fn"></div>
    </div>
</template>

<script>
// 导出的是当前组件的配置项
// export default 语法用于将一个值、函数、类或对象作为模块的默认导出，使得其他模块在导入该模块时可以使用 import 语法直接导入默认成员。
// 对象内部提供我们以前学习的vue组件的属性即可，data，methods，watch等
export default {
    methods:{
        fn() {
            alert("hello")
        }
    }
}
</script>

<!--如果要使用less，需要标识less语法 lang="less"-->
<style lang="less">
    .app {
        width: 200px;
        height: 200px;
        background-color: pink;
      
        .box {
            width: 50px;
            height: 50px;
            background-color: red;
        }
    }
</style>
```

![image-20240229160423231](img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229160423231.png)



## 普通组件的注册使用

### 局部注册

局部注册只能在注册的组件内使用

- 创建.vue文件（三个组成部分）
- 在使用的组件内导入并注册

使用：当成html标签使用`<组件名></组件名>`

组件名规范：**大驼峰命名法**

语法：

```vue
<script>
import 组件对象 from '.vue文件路径'
export default {
    // 局部注册，在要使用的上层组件内部，注册在components属性中
    components:{
        组件名：组件对象
    }
}
</script>
```

#### 案例

将我们的App.vue根组件调整为上中下三层结构，分别是头部，主体，尾部。

- 在src下创建components文件夹，在文件夹内部分别创建头部，主体，尾部对应的vue文件。

![image-20240229164412517](img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229164412517.png)

```vue
<!-- MyHeader.vue 内容 -->
<template>
    <div class="header">我是头部</div>
</template>
<script></script>
<style>
    .header {
        height: 100px;
        line-height: 100px;
        text-align: center;
        font-size: 30px;
        background-color: purple;
        color: #fff;
    }
</style>


<!-- MyMain.vue 内容 -->
<template>
    <div class="main">我是主体</div>
</template>
<script></script>
<style>
    .main {
        height: 400px;
        line-height: 400px;
        text-align: center;
        font-size: 30px;
        background-color: orange;
        color: #fff;
    }
</style>


<!-- MyFooter.vue 内容 -->
<template>
    <div class="footer">我是尾部</div>
</template>
<script></script>
<style>
    .footer {
        height: 100px;
        line-height: 100px;
        text-align: center;
        font-size: 30px;
        background-color: blueviolet;
        color: #fff;
    }
</style>
```

App.vue根组件内容：

```vue
<template>
    <div class="app">
        <!-- 头部组件  -->
        <MyHeader></MyHeader>
        <!--  主体组件  -->
        <MyMain></MyMain>
        <!--  尾部组件  -->
        <Footer></Footer>
    </div>
</template>

<script>
// 导入组件，注意大驼峰命名
import MyHeader from './components/MyHeader.vue'
import Footer from './components/MyFooter.vue'
import MyMain from './components/MyMain.vue'

export default {
    // 注册局部组件，这种注册方式，只能在这个注册的组件内部使用
    components:{
        // 标准写法
        MyHeader:MyHeader,
        Footer:Footer,
        // 简写，如果组件名和组件对象的名一致，简写为一个也可以
        MyMain
    }
}
</script>

<style>
    .app {
        width: 400px;
    }
</style>
```

效果：

<img src="img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229165209662.png" alt="image-20240229165209662" style="zoom: 50%;" />

### 全局注册

全局注册所有组件内都能使用。

- 创建vue文件（三个组册部分）
- 在**main.js**中进行全局注册

语法：

```vue
// 导入需要注册的组件(这里导入的时候，带不带 .vue 后缀都可以)
import 组件对象 from '.vue文件路径'
Vue.component('组件名',组件对象)
```

使用：当成html标签使用`<组件名></组件名>`

组件名规范：**大驼峰命名法**

#### 案例

在上面局部注册的基础上，我们在每一个文案后面，添加一个通用的按钮。

- 在components内部创建通用按钮组件的vue文件

```vue
<template>
    <button class="button">通用按钮</button>
</template>
<script></script>
<style>
    .button {
        height: 50px;
        line-height: 50px;
        padding: 0 20px;
        border-radius: 5px;
        background-color: green;
        color: #fff;
        border: none;
    }
</style>
```

在main.js中进行全局注册

```js
// 注意导入要写在main.js最上面
// 导入需要注册的组件(这里导入的时候，带不带 .vue 后缀都可以)
import MyButton from "./components/MyButton"
Vue.component('MyButton',MyButton)
```

接下来在头部，主体，尾部文件中直接使用组件即可：

```vue
<!-- MyHeader.vue 修改 -->
<template>
    <div class="header">我是头部<MyButton></MyButton></div>
</template>

<!-- MyMain.vue 修改 -->
<template>
    <div class="main">我是主体<MyButton></MyButton></div>
</template>

<!-- MyFooter.vue 修改 -->
<template>
    <div class="footer">我是尾部<MyButton></MyButton></div>
</template>
```

效果：

![image-20240229172123738](img/11.%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91//image-20240229172123738.png)



